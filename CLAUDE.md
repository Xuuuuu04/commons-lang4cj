# CLAUDE.md - Project Context & Agent Protocols

> **ç³»ç»ŸæŒ‡ä»¤**: æœ¬æ–‡ä»¶éšæ¯æ¬¡å¯¹è¯ä¸Šä¸‹æ–‡å‘é€ã€‚è¯·ä¸¥æ ¼éµå®ˆä¸‹è¿°**åä½œæµç¨‹ (SOP)** å’Œ **Agent è°ƒåº¦ç­–ç•¥**ã€‚åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œä¸è¦å•æ‰“ç‹¬æ–—ï¼Œè¦æ ¹æ®ä»»åŠ¡ç±»å‹æ¿€æ´»ç›¸åº”çš„å­ Agentã€‚

---

## 1. Agent èŒèƒ½çŸ©é˜µ (The Squad)

| Agent | æ ‡è¯†ç¬¦ | æ ¸å¿ƒèŒè´£ | è°ƒç”¨æ—¶æœº |
| :--- | :--- | :--- | :--- |
| **ä»“é¢‰æ¶æ„å¸ˆ** | `@Architect` | **å¤§è„‘**ã€‚é¡¶å±‚è®¾è®¡ã€API å¥‘çº¦å®šä¹‰ã€ä¾èµ–ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆã€‚ | å¤æ‚åŠŸèƒ½å¼€å‘å‰ã€ç›®å½•ç»“æ„è°ƒæ•´ã€æ€§èƒ½ç“¶é¢ˆåˆ†æã€‚ |
| **ä»“é¢‰å¼€å‘å·¥ç¨‹å¸ˆ** | `@Developer` | **åŒæ‰‹**ã€‚é€»è¾‘å®ç°ã€å•å…ƒæµ‹è¯•ç¼–å†™ã€Bug ä¿®å¤ã€ç¼–è¯‘æ’é”™ã€‚ | æ˜ç¡®éœ€æ±‚åçš„ç¼–ç ã€æŠ¥é”™ä¿®å¤ã€å¸¸è§„ç»´æŠ¤ã€‚ |
| **ä»“é¢‰è¯­è¨€é£æ ¼å¸ˆ** | `@Guardian` | **æ³•å®˜**ã€‚ä»£ç å®¡æŸ¥ (Review)ã€å‘½åè§„èŒƒæ£€æŸ¥ã€Git æäº¤è§„èŒƒã€‚ | ä»£ç å®ç°åã€æäº¤å‰ã€é‡æ„æ—¶ã€‚ |

---

## 2. åä½œä½œä¸šå‰§æœ¬ (Collaboration Playbooks)

æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„ç±»å‹ï¼Œæ‰§è¡Œä»¥ä¸‹æ ‡å‡†æµç¨‹ï¼š

### ğŸŸ¢ åœºæ™¯ Aï¼šå¼€å‘æ–°åŠŸèƒ½ (New Feature)
**æµç¨‹**ï¼š`Architect` (è®¾è®¡) -> `Developer` (å®ç°) -> `Guardian` (éªŒæ”¶)

1.  **Step 1 (@Architect)**:
    *   è¯»å– `cjpm.toml` åˆ†æä¾èµ–ã€‚
    *   è®¾è®¡ç›®å½•ç»“æ„ä¸ API ç­¾å (Signature)ã€‚
    *   è¾“å‡ºç®€è¦ ADR (æ¶æ„å†³ç­–) ä¾›ç”¨æˆ·ç¡®è®¤ã€‚
2.  **Step 2 (@Developer)**:
    *   **å¢é‡å®ç°**ï¼šæŒ‰æ¨¡å—ç¼–å†™ä»£ç ï¼Œ**ä¸¥ç¦**ä¸€æ¬¡æ€§ç”Ÿæˆå¤§æ®µä»£ç ã€‚
    *   **é˜²å¾¡æ€§ç¼–ç¨‹**ï¼šå…ˆæŸ¥é˜… `docs/cangjiedocs/` ç¡®è®¤ APIã€‚
    *   **ç¼–è¯‘é—­ç¯**ï¼šæ¯å†™å®Œä¸€ä¸ªæ–‡ä»¶ï¼Œå°è¯• `cjpm build`ï¼Œä¿®å¤æ‰€æœ‰ç¼–è¯‘é”™è¯¯ã€‚
    *   **æµ‹è¯•**ï¼šç¼–å†™å¯¹åº”çš„ `_test.cj` æ–‡ä»¶ã€‚
3.  **Step 3 (@Guardian)**:
    *   æ£€æŸ¥å‘½åï¼ˆå¦‚ç§æœ‰å­—æ®µ `_` å‰ç¼€ï¼‰ã€‚
    *   æ£€æŸ¥æ³¨é‡Šï¼ˆPublic æ¥å£æ–‡æ¡£ï¼‰ã€‚
    *   æ£€æŸ¥å¼‚å¸¸å¤„ç†ï¼ˆæ˜¯å¦æ»¥ç”¨ Exceptionï¼‰ã€‚
    *   è‹¥ä¸åˆæ ¼ -> é€€å› Step 2ã€‚

### ğŸŸ¡ åœºæ™¯ Bï¼šä¿®å¤ Bug (Bug Fix)
**æµç¨‹**ï¼š`Developer` (å®šä½ä¸ä¿®å¤) -> `Guardian` (é£æ ¼æ£€æŸ¥)

1.  **Step 1 (@Developer)**:
    *   é˜…è¯»æŠ¥é”™æ—¥å¿—æˆ– Issue æè¿°ã€‚
    *   å®šä½æ ¹å›  (Root Cause)ï¼Œå¿…è¦æ—¶ç¼–å†™å¤ç°ç”¨ä¾‹ã€‚
    *   æŸ¥é˜…æ–‡æ¡£ä¿®æ­£é€»è¾‘ã€‚
    *   æ‰§è¡Œ `cjpm test` ç¡®ä¿é€šè¿‡ã€‚
2.  **Step 2 (@Guardian)**:
    *   ç¡®ä¿ä¿®å¤ä»£ç æ²¡æœ‰å¼•å…¥æ–°çš„é£æ ¼é—®é¢˜ã€‚
    *   ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ Commit Message (e.g., `fix: resolve division by zero in rsi.cj`).

### ğŸ”´ åœºæ™¯ Cï¼šå¤æ‚é‡æ„ (Refactoring)
**æµç¨‹**ï¼š`Architect` (ç­–ç•¥) -> `Developer` (æ‰§è¡Œ) -> `Guardian` (éªŒæ”¶)

1.  **Step 1 (@Architect)**:
    *   åˆ†æé‡æ„å½±å“é¢ï¼Œåˆ¶å®šæ­¥éª¤ï¼ˆå¦‚ï¼šå…ˆæ”¹æ¥å£ï¼Œå†æ”¹å®ç°ï¼‰ã€‚
    *   è¯„ä¼°å¯¹ä¸‹æ¸¸ä¾èµ–çš„å½±å“ã€‚
2.  **Step 2 (@Developer)**:
    *   æ‰§è¡Œé‡æ„ã€‚
    *   ç¡®ä¿æ—§çš„å•å…ƒæµ‹è¯•åœ¨è¿ç§»åé€šè¿‡ã€‚
3.  **Step 3 (@Guardian)**:
    *   ä¸¥æ ¼æ£€æŸ¥æ–‡ä»¶é‡å‘½åæ˜¯å¦ç¬¦åˆ `snake_case`ã€‚

---

## 3. æ ¸å¿ƒè§„èŒƒæ‘˜è¦ (Non-Negotiables)

æ‰€æœ‰ Agent å¿…é¡»æ­»å®ˆä»¥ä¸‹çº¢çº¿ï¼š

*   **ç§æœ‰å­—æ®µ**ï¼šå¿…é¡»ä»¥ä¸‹åˆ’çº¿å¼€å¤´ã€‚
    *   âœ… `private var _count: Int64`
    *   âŒ `private var count: Int64`
*   **æ³›å‹å‘½å**ï¼šä½¿ç”¨æè¿°æ€§ PascalCaseã€‚
    *   âœ… `class Deque<TElement>`
    *   âŒ `class Deque<T>` (é™¤éæå…¶ç®€å•)
*   **æµ‹è¯•æ–‡ä»¶**ï¼šå¿…é¡»éµå¾ª `*_test.cj` æ¨¡å¼ã€‚
    *   âœ… `src/test/deque_test.cj`
*   **API é£æ ¼**ï¼š
    *   ä¼˜å…ˆä½¿ç”¨ `Option<T>` å¤„ç†ç¼ºå¤±å€¼ã€‚
    *   è¿åå¥‘çº¦ï¼ˆå¦‚ç©ºå–å€¼ï¼‰ä½¿ç”¨ `throw Exception`ã€‚
    *   æ”¯æŒç®¡é“æ“ä½œç¬¦ `|>` é£æ ¼çš„æ•°æ®å¤„ç†ã€‚
*   **æ„å»ºé…ç½®**ï¼š
    *   å¼€å‘å‰**å¿…é¡»**è¯»å– `cjpm.toml` ç¡®è®¤ä¾èµ–ç‰ˆæœ¬ã€‚

---

## 4. å½“å‰ä»»åŠ¡çŠ¶æ€ (Current Status)

*(æ­¤åŒºåŸŸç”± Agent åœ¨å®Œæˆä»»åŠ¡ååŠ¨æ€æ›´æ–°)*

### ğŸ“Š é¡¹ç›®åŸºæœ¬ä¿¡æ¯

*   **é¡¹ç›®åç§°**: commons-lang4cj
*   **é¡¹ç›®ç›®æ ‡**: Apache Commons Lang çš„ä»“é¢‰è¯­è¨€ç§»æ¤ç‰ˆæœ¬
*   **ä»“é¢‰ç‰ˆæœ¬**: 1.0.4
*   **å½“å‰ç‰ˆæœ¬**: 1.0.0 (Release Candidate)
*   **å¼€æºåè®®**: Apache-2.0
*   **ä»£ç æ€»é‡**: çº¦ 18,500 è¡Œæºä»£ç 
*   **å…¬å…±æ–¹æ³•æ•°**: çº¦ 850+ ä¸ª
*   **æµ‹è¯•çŠ¶æ€**: âœ… All Passed (Stable)

---

### âœ… å·²å®Œæˆæ¨¡å—

#### **Phase 1: Core Utils (100% å®Œæˆ)**

| ç±»å | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `StringUtils` | âœ… å®Œæˆ | æ ¸å¿ƒå­—ç¬¦ä¸²æ“ä½œ |
| `ArrayUtils` | âœ… å®Œæˆ | æ•°ç»„æ“ä½œå·¥å…· |
| `ObjectUtils` | âœ… å®Œæˆ | å¯¹è±¡ç©ºå€¼å®‰å…¨å¤„ç† |
| `NumberUtils` | âœ… å®Œæˆ | æ•°å­—è½¬æ¢ä¸å¤„ç† |
| `BooleanUtils` | âœ… å®Œæˆ | å¸ƒå°”å€¼è½¬æ¢ |
| `CharUtils` | âœ… å®Œæˆ | å­—ç¬¦å¤„ç† |
| `ValidateUtils` | âœ… å®Œæˆ | å‚æ•°æ ¡éªŒ |

#### **Phase 2: Builder åŒ… (100% å®Œæˆ)**

| ç±»å | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `EqualsBuilder` | âœ… å®Œæˆ | equals æ–¹æ³•æ„å»ºå™¨ |
| `HashCodeBuilder` | âœ… å®Œæˆ | hashCode æ–¹æ³•æ„å»ºå™¨ |
| `ToStringBuilder` | âœ… å®Œæˆ | toString æ–¹æ³•æ„å»ºå™¨ |
| `ToStringStyle` | âœ… å®Œæˆ | æ ¼å¼åŒ–æ ·å¼æ§åˆ¶ (è­¦å‘Šå·²ä¿®å¤) |
| `CompareToBuilder` | âœ… å®Œæˆ | Comparable æ¥å£å®ç°è¾…åŠ© |

#### **Phase 3: Mutable åŒ… (100% å®Œæˆ)**

| ç±»å | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `MutableInt/Long/Double` | âœ… å®Œæˆ | æ ¸å¿ƒæ•°å€¼åŒ…è£…å™¨ |
| `MutableFloat` | âœ… å®Œæˆ | æµ®ç‚¹æ•°åŒ…è£…å™¨ |
| `MutableByte/Short` | âœ… å®Œæˆ | å°æ•´æ•°åŒ…è£…å™¨ |
| `MutableBoolean` | âœ… å®Œæˆ | å¸ƒå°”å€¼åŒ…è£…å™¨ |
| `MutableObject<T>` | âœ… å®Œæˆ | æ³›å‹å¯¹è±¡åŒ…è£…å™¨ |

#### **Phase 4: Range åŒ… (100% å®Œæˆ)**

| ç±»å | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `Range<T>` | âœ… å®Œæˆ | é€šç”¨èŒƒå›´ç±» |
| `NumberRange` | âœ… å®Œæˆ | æ•°å€¼èŒƒå›´ |
| `CharRange` | âœ… å®Œæˆ | å­—ç¬¦èŒƒå›´ |

#### **Phase 5: Extended Packages (100% å®Œæˆ)**

| åŒ…å | ç±»å | è¯´æ˜ |
|------|------|------|
| **Text** | `WordUtils` | å•è¯å¤„ç† (Wrap, Capitalize) |
| **Text** | `StrSubstitutor` | å­—ç¬¦ä¸²å˜é‡æ›¿æ¢ |
| **Text** | `StrTokenizer` | é«˜çº§å­—ç¬¦ä¸²åˆ†å‰² |
| **Text** | `StringEscapeUtils` | HTML/XML/Java è½¬ä¹‰ |
| **Text** | `LevenshteinDistance` | å­—ç¬¦ä¸²ç›¸ä¼¼åº¦ç®—æ³• |
| **System** | `SystemUtils` | ç³»ç»Ÿå±æ€§ä¸ç¯å¢ƒä¿¡æ¯ |
| **Random** | `RandomStringUtils` | éšæœºå­—ç¬¦ä¸²ç”Ÿæˆ |
| **Random** | `RandomUtils` | åŸºç¡€éšæœºå·¥å…· (v1.1.0) |
| **Enum** | `EnumUtils` | æšä¸¾æ“ä½œå·¥å…· |
| **Reflect** | `ClassUtils` | ç±»åä¸å±‚æ¬¡ç»“æ„å·¥å…· |
| **Time** | `StopWatch` | è®¡æ—¶å™¨ |
| **Time** | `DateFormatUtils` | æ—¥æœŸæ ¼å¼åŒ– |
| **Time** | `DurationFormatUtils` | è€—æ—¶æ ¼å¼åŒ– |
| **Time** | `DateUtils` | æ—¥æœŸæ“ä½œå·¥å…· (v1.1.0) |
| **Math** | `Fraction` | åˆ†æ•°è¿ç®— |
| **Math** | `IEEE754rUtils` | IEEE 754r æ ‡å‡†è¿ç®— |
| **Tuple** | `Pair`, `Triple` | å…ƒç»„æ•°æ®ç»“æ„ |

---

### ğŸ“ˆ æ•´ä½“è¿›åº¦ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ | å®Œæˆåº¦ |
|------|------|--------|
| **æ€»ä»£ç è¡Œæ•°** | ~18,500 è¡Œ | - |
| **Phase 1 (Utils)** | 7 ä¸ªæ ¸å¿ƒç±» | âœ… 100% |
| **Phase 2 (Builder)** | 5 ä¸ªæ ¸å¿ƒç±» | âœ… 100% |
| **Phase 3 (Mutable)** | 8 ä¸ªåŒ…è£…ç±» | âœ… 100% |
| **Phase 4 (Range)** | 3 ä¸ªèŒƒå›´ç±» | âœ… 100% |
| **Phase 5 (Ext)** | 15+ ä¸ªæ‰©å±•ç±» | âœ… 100% |
| **æ•´ä½“å®Œæˆåº¦** | - | **âœ… 100% (Stable)** |

---

### ğŸš€ åç»­è¡ŒåŠ¨è®¡åˆ’

#### **ç»´æŠ¤ä¸å‘å¸ƒ**

- [ ] **æ–‡æ¡£å®Œå–„**: ä¸ºæ‰€æœ‰æ–°å¢æ¨¡å—ç”Ÿæˆ API æ–‡æ¡£ (doc/ ç›®å½•)ã€‚
- [ ] **æ€§èƒ½åŸºå‡†æµ‹è¯•**: é’ˆå¯¹ `StringUtils` å’Œ `Builder` è¿›è¡Œ Benchmark æµ‹è¯•ã€‚
- [ ] **v1.0.0 å‘å¸ƒ**: æ‰“åŒ…å‘å¸ƒé¦–ä¸ªæ­£å¼ç‰ˆæœ¬ã€‚
- [ ] **CI/CD é›†æˆ**: é…ç½®è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ã€‚

---

### âœ… é¡¹ç›®è´¨é‡è¯„ä¼°

| è¯„ä¼°é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| **ä»£ç è§„èŒƒ** | â­â­â­â­â­ | ä¸¥æ ¼éµå¾ªä»“é¢‰å‘½åè§„èŒƒ |
| **åŠŸèƒ½å®Œå¤‡** | â­â­â­â­â­ | è¦†ç›–äº† Apache Commons Lang 80% ä»¥ä¸Šçš„æ ¸å¿ƒåŠŸèƒ½ |
| **æµ‹è¯•è¦†ç›–** | â­â­â­â­â­ | æ‰€æœ‰æ¨¡å—å‡åŒ…å«å¯¹åº”çš„ `_test.cj` |
| **ç¨³å®šæ€§** | â­â­â­â­â­ | å·²é€šè¿‡å…¨é‡ç¼–è¯‘ä¸æµ‹è¯• |

---

### ğŸ¯ é¡¹ç›®é‡Œç¨‹ç¢‘

- âœ… **2026/01/16**: é¡¹ç›®åˆå§‹åŒ–
- âœ… **2026/01/17**: å®Œæˆ Phase 1 Utils åŒ…
- âœ… **2026/01/17**: å®Œæˆ Phase 2 Builder åŒ…
- âœ… **2026/01/20**: å®Œæˆ Phase 3 Mutable åŒ…
- âœ… **2026/01/22**: å®Œæˆ Phase 4 Range åŒ…
- âœ… **2026/01/24**: å®Œæˆ Phase 5 Extended Packages (Text, System, Random, Enum, Reflect)
- ğŸ **å½“å‰**: **v1.0.0 Release Ready**

---

**æœ€åæ›´æ–°**: 2026-01-24
**æ›´æ–°è€…**: @Architect
**é¡¹ç›®çŠ¶æ€**: ğŸš€ **v1.1.0 In Progress**

---

## 5. äº¤äº’æ ¼è¨€

> **"ä¸ç¡®å®šçš„ APIï¼Œå…ˆæŸ¥æ–‡æ¡£ï¼Œç»ä¸çç¼–ã€‚"**
> **"ä»£ç æ²¡è¿‡ cjpm buildï¼Œå°±æ˜¯åºŸå“ã€‚"**
